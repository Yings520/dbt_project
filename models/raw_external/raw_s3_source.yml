version: 2

sources:
  - name: PUBLIC
    tables:
      - name: raw_external_backend_api_meta_di
        description: >
          External table for backend API data loaded from S3 (Parquet format).
        external:
          database: PROD_ALFREDX
          schema: PUBLIC
          location: "@PROD_ALFREDX.PUBLIC.raw_external_backend_api_meta_stage"
          file_format: parquet_format
          auto_refresh: true
          stage: raw_external_backend_api_meta_stage
        columns:
          - name: path
            data_type: string
            expression: VALUE:path::string
            description: "API endpoint path (URL path)"
          - name: method
            data_type: string
            expression: VALUE:method::string
            description: "HTTP method type (GET/POST/etc)"
          - name: description
            data_type: string
            expression: VALUE:description::string
            description: "Functional description of the API"
          - name: operation_id
            data_type: string
            expression: VALUE:operation_id::string
            description: "Unique identifier for the API operation"
          - name: tags
            data_type: string
            expression: VALUE:tags::string
            description: "Associated API tags"
          - name: security
            data_type: string
            expression: VALUE:security::string
            description: "Security requirements"
          - name: parameters
            data_type: string
            expression: VALUE:parameters::string
            description: "Input parameter definitions"
          - name: request_body
            data_type: string
            expression: VALUE:request_body::string
            description: "Request body specifications"
          - name: responses
            data_type: string
            expression: VALUE:responses::string
            description: "Response body definitions"
          - name: etl_time
            data_type: timestamp
            expression: VALUE:etl_time::timestamp_ntz
            description: "Data update timestamp"
          - name: pt
            data_type: string
            expression: VALUE:pt::string
            description: "Partition field (YYYY-MM-DD)"


      - name: raw_external_front_routes_meta_di
        description: >
          Table for API metadata for front-end routes.
        external:
          database: PROD_ALFREDX
          schema: PUBLIC
          location: "@PROD_ALFREDX.PUBLIC.raw_external_front_routes_meta_stage"
          file_format: parquet_format
          auto_refresh: true
          stage: raw_external_front_routes_meta_stage
        columns:
          - name: path
            data_type: string
            expression: VALUE:path::string
            description: "API endpoint path (URL path)"
          - name: method
            data_type: string
            expression: VALUE:method::string
            description: "HTTP method type (GET/POST/etc)"
          - name: description
            data_type: string
            expression: VALUE:description::string
            description: "Functional description of the API"
          - name: summary
            data_type: string
            expression: VALUE:summary::string
            description: "Brief summary of the API"
          - name: tags
            data_type: string
            expression: VALUE:tags::string
            description: "Primary tag for the API"
          - name: security
            data_type: string
            expression: VALUE:security::string
            description: "Security requirements"
          - name: parameters
            data_type: string
            expression: VALUE:parameters::string
            description: "Input parameters"
          - name: responses
            data_type: string
            expression: VALUE:responses::string
            description: "API responses"
          - name: navigation_flow
            data_type: variant
            expression: VALUE:navigation_flow::variant
            description: "Structured navigation flow data"
          - name: page_renders
            data_type: variant
            expression: VALUE:page_renders::variant
            description: "List of page renders"
          - name: user_journey
            data_type: string
            expression: VALUE:user_journey::string
            description: "User journey description"
          - name: etl_time
            data_type: timestamp
            expression: VALUE:etl_time::timestamp_ntz
            description: "ETL processing timestamp"
          - name: pt
            data_type: string
            expression: VALUE:pt::string
            description: "Partition field (date-based)"
